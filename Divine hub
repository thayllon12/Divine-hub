-- inicializa√ß√£o ü•µ

local SoundService = game:GetService("SoundService")

local introSound = Instance.new("Sound")
introSound.SoundId = "rbxassetid://91271761310463" -- teu ID üòà
introSound.Volume = 1
introSound.Looped = false
introSound.Parent = SoundService

-- toca ao executar o script
introSound:Play()

-- para e limpa depois de 5 segundos
task.delay(10, function()
	if introSound.IsPlaying then
		introSound:Stop()
	end
	introSound:Destroy()
end)

--// SERVI√áOS
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Camera = workspace.CurrentCamera

--// REMOVER GUI ANTIGA
if PlayerGui:FindFirstChild("DivineHub") then
	PlayerGui.DivineHub:Destroy()
end

--// VARI√ÅVEIS
local SelectedPlayer = nil
local TweenActive = false
local SilentActive = false
local LOCKED = false
local aimbot_target = nil
local last_target = nil
-- VARI√ÅVEIS CONFIG
local SPEED_TWEEN = 350
local SPEED_KILL = 350
local ORBIT_SPEED_TWEEN = 5
local ORBIT_SPEED_KILL = 5
local UP_OFFSET_TWEEN = 30
local UP_OFFSET_KILL = 30
local ORBIT_MODE_TWEEN = 1 -- 1=Orbita,2=Wazure,3=Estrela
local ORBIT_MODE_KILL = 1 -- 1=Orbita,2=Wazure,3=Estrela
local ORBIT_RADIUS = 10
local ORBIT_HEIGHT = 5

-- GUI BASE

local Gui = Instance.new("ScreenGui", PlayerGui)
Gui.Name = "DivineHub"
Gui.ResetOnSpawn = false
Gui.DisplayOrder = 2147483647 
Gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- BOT√ÉO PRINCIPAL DIVINE HUB
local mainButton = Instance.new("ImageButton", Gui)
mainButton.Size = UDim2.new(0,30,0,30)
mainButton.Position = UDim2.new(0,15,0,80)
mainButton.BackgroundColor3 = Color3.fromRGB(0,255,255)
mainButton.Image = "rbxassetid://75330746621779"
mainButton.ImageColor3 = Color3.new(1,1,1)
mainButton.AutoButtonColor = true
mainButton.Active = true
mainButton.Draggable = true

-- üî• ZINDEX ABSURDO
mainButton.ZIndex = 2147483647

-- CANTO
local corner = Instance.new("UICorner", mainButton)
corner.CornerRadius = UDim.new(0,10)

-- BORDA
local stroke = Instance.new("UIStroke", mainButton)
stroke.Thickness = 3
stroke.Color = Color3.fromRGB(0,255,255)
stroke.ZIndex = 2147483647

--  RGB 

-- CONFIG
local normalSize = UDim2.new(0,33,0,34)
local pulseDuration = 0.2 -- tempo do pulso
local pulsePower = 6      -- for√ßa do pulso

-- ESTADOS
local pulsando = false
local pulseStart = 0

-- SOM DE CLIQUE üîä
local clickSound = Instance.new("Sound")
clickSound.SoundId = "rbxassetid://1673280232"
clickSound.Volume = 1
clickSound.Parent = mainButton

-- CLIQUE DO BOT√ÉO
mainButton.MouseButton1Click:Connect(function()
	-- toca som
	clickSound:Play()

	-- ativa pulso
	pulsando = true
	pulseStart = tick()
end)

-- LOOP RGB + PULSO
task.spawn(function()
	local h = 0

	while true do
		local now = tick()

		-- RGB r√°pido üî•
		h = (h + 0.03) % 1
		stroke.Color = Color3.fromHSV(h, 1, 1)
		mainButton.BackgroundColor3 = Color3.fromHSV((now * 1.2) % 1, 1, 1)

		-- PULSO (s√≥ quando clica)
		if pulsando then
			local t = now - pulseStart

			if t <= pulseDuration then
				local pulse = math.sin(t * 12)
				mainButton.Size = UDim2.new(
					0, 33 + pulse * pulsePower,
					0, 34 + pulse * pulsePower
				)
			else
				pulsando = false
				mainButton.Size = normalSize
			end
		end

		task.wait(0.01)
	end
end)

--FPS GUI ULTRA TURBO EDITION
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")
local SoundService = game:GetService("SoundService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

-- Remove HUD antigo
pcall(function()
    local g = player.PlayerGui:FindFirstChild("FPSPingCounter")
    if g then g:Destroy() end
end)

-- ================= GUI =================
local gui = Instance.new("ScreenGui")
gui.Name = "FPSPingCounter"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.DisplayOrder = 999999
gui.Parent = player:WaitForChild("PlayerGui")

local label = Instance.new("TextLabel")
label.Size = UDim2.fromOffset(150, 34)
label.Position = UDim2.fromOffset(300, 5)
label.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
label.BackgroundTransparency = 0.7 -- üëà FUNDO 70% TRANSPARENTE
label.TextScaled = true
label.Font = Enum.Font.GothamBold
label.BorderSizePixel = 0
label.TextStrokeTransparency = 0
label.TextStrokeColor3 = Color3.fromRGB(0,0,0)
label.RichText = true
label.ZIndex = 999999
label.Parent = gui

-- SOM 
local beep = Instance.new("Sound")
beep.SoundId = "rbxassetid://17748195478" -- SOM NOVO
beep.Volume = 1
beep.Parent = SoundService

local soundEnabled = true

-- FPS / PING 
local frames = 0
local last = os.clock()
local blink = false
local wasBad = false

local function getPing()
    local net = Stats:FindFirstChild("Network")
    if not net then return 0 end
    local s = net:FindFirstChild("ServerStatsItem")
    if not s then return 0 end
    local p = s:FindFirstChild("Data Ping")
    if not p then return 0 end
    return tonumber(p:GetValueString():match("%d+")) or 0
end

-- FPS CORES (AJUSTADO)
local function fpsColor(f)
    if f >= 50 then return Color3.fromRGB(0,255,0) end        -- VERDE PURO
    if f >= 30 then return Color3.fromRGB(255,255,0) end      -- AMARELO
    if f >= 15 then return Color3.fromRGB(255,165,0) end      -- LARANJA
    return Color3.fromRGB(255,0,0)                             -- VERMELHO
end

-- PING CORES (AJUSTADO)
local function pingColor(ms)
    if ms <= 65  then return Color3.fromRGB(0,255,0) end      -- VERDE PURO
    if ms <= 120 then return Color3.fromRGB(255,255,0) end    -- AMARELO
    if ms <= 180 then return Color3.fromRGB(255,165,0) end    -- LARANJA
    return Color3.fromRGB(255,0,0)                             -- VERMELHO
end

-- CHAT COMMANDS 
local function starts(cmd, txt)
    return txt:sub(1, #cmd) == cmd
end

player.Chatted:Connect(function(msg)
    msg = msg:lower()

    -- LOCK / UNLOCK
    if starts("/u", msg) then
        draggable = false
    elseif starts("/l", msg) then
        draggable = true
    end

    -- SOM / UNSOM
    if starts("/un", msg) then
        soundEnabled = false
    elseif starts("/s", msg) then
        soundEnabled = true
    end
end)

-- LOOP 
RunService.RenderStepped:Connect(function()
    frames += 1

    if os.clock() - last >= 1 then
        local fps = frames
        local ping = getPing()

        local fc = fpsColor(fps)
        local pc = pingColor(ping)

        -- üî• CONDI√á√ÉO DO GRITO
        local bad = (fps <= 10) or (ping >= 200)
        blink = not blink

        if bad then
            label.BackgroundColor3 =
                blink and Color3.fromRGB(255,0,0) or Color3.fromRGB(0,0,0)

            if not wasBad and soundEnabled then
                beep:Play()
            end
        else
            label.BackgroundColor3 = Color3.fromRGB(0,0,0)
        end

        wasBad = bad

        label.Text = string.format(
            "<font color='rgb(%d,%d,%d)'>FPS %d</font> | <font color='rgb(%d,%d,%d)'>%d ms</font>",
            fc.R*255, fc.G*255, fc.B*255, fps,
            pc.R*255, pc.G*255, pc.B*255, ping
        )

        frames = 0
        last = os.clock()
    end
end)

-- MENU
local MenuFrame = Instance.new("Frame", Gui)
MenuFrame.Size = UDim2.new(0,420,0,305)
MenuFrame.Position = UDim2.new(0.5,-210,0.5,-170)
MenuFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
MenuFrame.BackgroundTransparency = 0.2
MenuFrame.Visible = false
Instance.new("UICorner", MenuFrame).CornerRadius = UDim.new(0,14)
local stroke = Instance.new("UIStroke", MenuFrame)
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(0,255,0)
MenuFrame.Active = true
MenuFrame.Draggable = true
-- cadeado üîì 
local DragEnabled = true

MenuFrame.Active = true
MenuFrame.Draggable = true

local DragBtn = Instance.new("TextButton", MenuFrame)
DragBtn.Size = UDim2.new(0,20,0,20)
DragBtn.Position = UDim2.new(1,-28,0,3)
DragBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
DragBtn.BackgroundTransparency = 0.5
DragBtn.Text = "üîì"
DragBtn.TextColor3 = Color3.fromRGB(255,255,255)
DragBtn.Font = Enum.Font.GothamBold
DragBtn.TextSize = 22
DragBtn.ZIndex = MenuFrame.ZIndex + 1
Instance.new("UICorner", DragBtn).CornerRadius = UDim.new(0,6)

DragBtn.MouseButton1Click:Connect(function()
	DragEnabled = not DragEnabled
	MenuFrame.Draggable = DragEnabled

	if DragEnabled then
		DragBtn.Text = "üîì"
		DragBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
		DragBtn.BackgroundTransparency = 0.5
		DragBtn.TextColor3 = Color3.fromRGB(255,255,255)
	else
		DragBtn.Text = "üîí"
		DragBtn.BackgroundColor3 = Color3.fromRGB(0,255,0)
		DragBtn.BackgroundTransparency = 0
		DragBtn.TextColor3 = Color3.fromRGB(0,0,0)
	end
end)

-- TOGGLE MENU
mainButton.MouseButton1Click:Connect(function()
    MenuFrame.Visible = not MenuFrame.Visible
end)

local SoundService = game:GetService("SoundService")

local clickSound = Instance.new("Sound")
clickSound.SoundId = "rbxassetid://535716488"
clickSound.Volume = 1
clickSound.Parent = SoundService

local function AddBtn(parent, text, pos)
	local b = Instance.new("TextButton", parent)
	b.Size = UDim2.new(0,120,0,45)
	b.Position = pos
	b.BackgroundColor3 = Color3.fromRGB(0,0,0)
	b.Text = text
	b.TextColor3 = Color3.fromRGB(1, 255, 1)
	b.Font = Enum.Font.GothamBold
	b.TextSize = 15
	b.AutoButtonColor = true
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)
	b.MouseButton1Click:Connect(function()
		clickSound:Play()
	end)
	return b
end
local TweenBtn = AddBtn(MenuFrame,"Tween OFF",UDim2.new(0,15,0,30))
local SilentBtn = AddBtn(MenuFrame,"Aim Bot OFF",UDim2.new(0,150,0,30))
local KillBtn = AddBtn(MenuFrame,"Kill OFF",UDim2.new(0,285,0,30))
local FastBtn = AddBtn(MenuFrame,"Fast OFF",UDim2.new(0,285,0,90))
local SelectBtn = AddBtn(MenuFrame,"Selecionar",UDim2.new(0,15,0,90))
local RemoveBtn = AddBtn(MenuFrame,"Remover",UDim2.new(0,150,0,90))
local MiscBtn = AddBtn(MenuFrame,"Misc",UDim2.new(0,15,0,150))
local ConfigBtn = AddBtn(MenuFrame,"Config",UDim2.new(0,285,0,150))
local AuraBtn = AddBtn(MenuFrame,"Aura üçå OFF",UDim2.new(0,150,0,150))

local ConfigFrame = Instance.new("Frame", Gui)
ConfigFrame.Size = UDim2.new(0,300,0,400)
ConfigFrame.Position = UDim2.new(0.5,-150,0.5,-200)
ConfigFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)
ConfigFrame.Visible = false
ConfigFrame.Active = true
ConfigFrame.Draggable = true

local DragEnabled = true

local DragBtn = Instance.new("TextButton", ConfigFrame)
DragBtn.Size = UDim2.new(0,20,0,20)
DragBtn.Position = UDim2.new(1,-28,0,0)
DragBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
DragBtn.BackgroundTransparency = 0.5
DragBtn.Text = "üîì"
DragBtn.TextColor3 = Color3.fromRGB(255,255,255)
DragBtn.Font = Enum.Font.GothamBold
DragBtn.TextSize = 22
DragBtn.ZIndex = ConfigFrame.ZIndex + 1
Instance.new("UICorner", DragBtn).CornerRadius = UDim.new(0,6)

ConfigFrame.Draggable = true

DragBtn.MouseButton1Click:Connect(function()
	DragEnabled = not DragEnabled
	ConfigFrame.Draggable = DragEnabled

	if DragEnabled then
		DragBtn.Text = "üîì"
		DragBtn.BackgroundColor3 = Color3.fromRGB(255,0,0)
		DragBtn.BackgroundTransparency = 0.5
		DragBtn.TextColor3 = Color3.fromRGB(255,255,255)
	else
		DragBtn.Text = "üîí"
		DragBtn.BackgroundColor3 = Color3.fromRGB(0,255,0)
		DragBtn.BackgroundTransparency = 0.5
		DragBtn.TextColor3 = Color3.fromRGB(0,0,0)
	end
end)
Instance.new("UICorner", ConfigFrame).CornerRadius = UDim.new(0,14)

local stroke = Instance.new("UIStroke", ConfigFrame)
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(0,255,0)

local SoundService = game:GetService("SoundService")

local clickSound = Instance.new("Sound")
clickSound.SoundId = "rbxassetid://535716488"
clickSound.Volume = 1
clickSound.Parent = SoundService

local CloseBtn = Instance.new("TextButton", ConfigFrame)
CloseBtn.Size = UDim2.new(0,30,0,30)
CloseBtn.Position = UDim2.new(0,10,0,10)
CloseBtn.Text = "X"
CloseBtn.TextColor3 = Color3.new(1,0,0)
CloseBtn.BackgroundColor3 = Color3.fromRGB(20,20,20)
CloseBtn.Font = Enum.Font.SourceSansBold
CloseBtn.TextSize = 18
Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0,5)

CloseBtn.MouseButton1Click:Connect(function()
	clickSound:Play()
	ConfigFrame.Visible = false
end)

ConfigBtn.MouseButton1Click:Connect(function()
    clickSound:Play()
    ConfigFrame.Visible = not ConfigFrame.Visible
    MenuFrame.Visible = false
end)

-- LABEL ALVO
local SelectedLabel = Instance.new("TextLabel", MenuFrame)
SelectedLabel.Size = UDim2.new(1,0,0,30)
SelectedLabel.Position = UDim2.new(0,0,0,250)
SelectedLabel.BackgroundTransparency = 1
SelectedLabel.Text = "Alvo: Nenhum"
SelectedLabel.TextColor3 = Color3.fromRGB(1, 255, 1)
SelectedLabel.Font = Enum.Font.GothamBold
SelectedLabel.TextSize = 16

-- HUD-SP
local HUD = Instance.new("ScreenGui", PlayerGui)
HUD.Name = "HUD_SP"
HUD.ResetOnSpawn = false

local frame = Instance.new("Frame", HUD)
frame.Size = UDim2.new(0,150,0,50)
frame.Position = UDim2.new(0,527,0,-47)
frame.BackgroundColor3 = Color3.fromRGB(0,0,0)
frame.BackgroundTransparency = 0.4
frame.BorderSizePixel = 0
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,8)

local txt = Instance.new("TextLabel", frame)
txt.Size = UDim2.new(1,0,1,0)
txt.BackgroundTransparency = 1
txt.TextColor3 = Color3.fromRGB(255,255,255)
txt.Font = Enum.Font.GothamBold
txt.TextSize = 16
txt.Text = "Seleciona algu√©m"

-- Atualiza√ß√£o do HUD
RunService.RenderStepped:Connect(function()
    if SelectedPlayer and SelectedPlayer.Character and SelectedPlayer.Character:FindFirstChild("Humanoid") and SelectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hum = SelectedPlayer.Character:FindFirstChild("Humanoid")
        local root = SelectedPlayer.Character:FindFirstChild("HumanoidRootPart")
        local dist = (root.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
        txt.Text = string.format("%s\nDist√¢ncia: %.1f\nVida: %.0f", SelectedPlayer.Name, dist, hum.Health)
        frame.Visible = true
    else
        txt.Text = "Seleciona algu√©m"
        frame.Visible = false
    end
end)

-- LISTA DE JOGADORES
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local SoundService = game:GetService("SoundService")

local clickSound = Instance.new("Sound")
clickSound.SoundId = "rbxassetid://535716488"
clickSound.Volume = 1
clickSound.Parent = SoundService

Gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local PlayerListFrame = Instance.new("Frame", Gui)
PlayerListFrame.Size = UDim2.new(0,220,0,320)
PlayerListFrame.Position = UDim2.new(0.5,140,0.5,-200)
PlayerListFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
PlayerListFrame.BackgroundTransparency = 0.5
PlayerListFrame.Visible = false
PlayerListFrame.ZIndex = 999999

local FrameCorner = Instance.new("UICorner", PlayerListFrame)
FrameCorner.CornerRadius = UDim.new(0,14)

local FrameStroke = Instance.new("UIStroke", PlayerListFrame)
FrameStroke.Thickness = 2
FrameStroke.Color = Color3.fromRGB(0,255,0)
FrameStroke.ZIndex = 999999

local Scrolling = Instance.new("ScrollingFrame", PlayerListFrame)
Scrolling.Size = UDim2.new(1,0,1,0)
Scrolling.CanvasSize = UDim2.new(0,0,0,0)
Scrolling.ScrollBarThickness = 6
Scrolling.BackgroundTransparency = 1
Scrolling.AutomaticCanvasSize = Enum.AutomaticSize.None
Scrolling.ZIndex = 999999

local UIList = Instance.new("UIListLayout", Scrolling)
UIList.Padding = UDim.new(0,8)
UIList.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function UpdateList()
	for _, v in pairs(Scrolling:GetChildren()) do
		if v:IsA("TextButton") then
			v:Destroy()
		end
	end

	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer then
			local Button = Instance.new("TextButton", Scrolling)

			Button.Size = UDim2.new(1,-16,0,42)
			Button.BackgroundColor3 = Color3.fromRGB(0,0,0)
			Button.AutoButtonColor = false
			Button.ZIndex = 999999

			Button.Text = plr.DisplayName
			Button.TextColor3 = Color3.fromRGB(0,255,0)
			Button.Font = Enum.Font.GothamBold
			Button.TextSize = 15
			Button.TextXAlignment = Enum.TextXAlignment.Center
			Button.TextYAlignment = Enum.TextYAlignment.Center

			local Corner = Instance.new("UICorner", Button)
			Corner.CornerRadius = UDim.new(0,10)

			Button.MouseButton1Click:Connect(function()
				clickSound:Play()
				SelectedPlayer = plr
				SelectedLabel.Text = "Alvo: "..plr.DisplayName
				PlayerListFrame.Visible = false
			end)

			task.wait()
			Scrolling.CanvasSize = UDim2.new(
				0,0,
				0, UIList.AbsoluteContentSize.Y + 12
			)
		end
	end
end

SelectBtn.MouseButton1Click:Connect(function()
	PlayerListFrame.Visible = not PlayerListFrame.Visible
	UpdateList()
end)

RemoveBtn.MouseButton1Click:Connect(function()
	SelectedPlayer = nil
	SelectedLabel.Text = "Alvo: Nenhum"
end)

-- FUN√á√ÉO GET PART
local function GetPart(char)
return char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
end

-- VARI√ÅVEIS DE NOCOLIP
local noclipConnection = nil
local originalCollisionStates = {}

local function Noclip(state)
local char = LocalPlayer.Character
if not char then return end
if state then
for _,v in pairs(char:GetDescendants()) do
if v:IsA("BasePart") then
originalCollisionStates[v] = v.CanCollide
v.CanCollide = false
end
end
else
for part,collide in pairs(originalCollisionStates) do
if part and part.Parent then
part.CanCollide = collide
end
end
originalCollisionStates = {}
end
end

-- CONFIG FRAME 

ConfigFrame.Size = UDim2.new(0,400,0,310)
ConfigFrame.Position = UDim2.new(0.5,-200,0.5,-170)
ConfigFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
ConfigFrame.Visible = false
ConfigFrame.BackgroundTransparency = 0.5
Instance.new("UICorner", ConfigFrame).CornerRadius = UDim.new(0,14)

--// BOT√ïES DE ORBITA
local SoundService = game:GetService("SoundService")

local clickSound = Instance.new("Sound")
clickSound.SoundId = "rbxassetid://535716488"
clickSound.Volume = 1
clickSound.Parent = SoundService

local function criarBotaoModo(parent, texto, pos, callback)
	local b = Instance.new("TextButton", parent)
	b.Size = UDim2.new(0,100,0,30)
	b.Position = pos
	b.BackgroundColor3 = Color3.fromRGB(100,100,100)
	b.TextColor3 = Color3.new(1,1,1)
	b.Font = Enum.Font.GothamBold
	b.TextSize = 14
	b.Text = texto
	Instance.new("UICorner", b)

	b.MouseButton1Click:Connect(function()
		clickSound:Play()
		callback()

		for _, v in pairs(parent:GetChildren()) do
			if v:IsA("TextButton") then
				v.BackgroundColor3 = Color3.fromRGB(100,100,100)
			end
		end

		b.BackgroundColor3 = Color3.fromRGB(0,150,255)
	end)

	return b
end

-- Tween modos

local TweenModoFrame = Instance.new("Frame", ConfigFrame)
TweenModoFrame.Size = UDim2.new(0,380,0,40) -- mais largo
TweenModoFrame.Position = UDim2.new(0,10,0,210)
TweenModoFrame.BackgroundTransparency = 1

local TweenOrbitaBtn = criarBotaoModo(TweenModoFrame,"Orbita",UDim2.new(0,0,0,0),function() ORBIT_MODE_TWEEN = 1 end)
local TweenWazureBtn = criarBotaoModo(TweenModoFrame,"Wazure",UDim2.new(0,130,0,0),function() ORBIT_MODE_TWEEN = 2 end)
local TweenEstrelaBtn = criarBotaoModo(TweenModoFrame,"Estrela",UDim2.new(0,260,0,0),function() ORBIT_MODE_TWEEN = 3 end)

-- Kill modos
local KillModoFrame = Instance.new("Frame", ConfigFrame)
KillModoFrame.Size = UDim2.new(0,380,0,40)
KillModoFrame.Position = UDim2.new(0,10,0,260)
KillModoFrame.BackgroundTransparency = 1

local KillOrbitaBtn = criarBotaoModo(KillModoFrame,"Orbita",UDim2.new(0,0,0,0),function() ORBIT_MODE_KILL = 1 end)
local KillWazureBtn = criarBotaoModo(KillModoFrame,"Wazure",UDim2.new(0,130,0,0),function() ORBIT_MODE_KILL = 2 end)
local KillEstrelaBtn = criarBotaoModo(KillModoFrame,"Estrela",UDim2.new(0,260,0,0),function() ORBIT_MODE_KILL = 3 end)

--// SLIDERS ESTILO NOVO
local function criarSlider(nome, posY, min, max, valorInicial, callback)
local label = Instance.new("TextLabel", ConfigFrame)
label.Size = UDim2.new(1,-20,0,20)
label.Position = UDim2.new(0,10,0,posY)
label.Text = nome.." ("..valorInicial..")"
label.TextColor3 = Color3.new(1,1,1)
label.BackgroundTransparency = 1
label.Font = Enum.Font.SourceSansBold
label.TextSize = 13

local barra = Instance.new("Frame", ConfigFrame)  
barra.Size = UDim2.new(1,-20,0,14)  
barra.Position = UDim2.new(0,10,0,posY+22)  
barra.BackgroundColor3 = Color3.fromRGB(70,70,70)  

local fill = Instance.new("Frame", barra)  
fill.Size = UDim2.new((valorInicial-min)/(max-min),0,1,0)  
fill.BackgroundColor3 = Color3.fromRGB(0,170,255)  

local segurando = false  
barra.InputBegan:Connect(function(input)  
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then  
        segurando = true  
    end  
end)  
UserInputService.InputEnded:Connect(function(input)  
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then  
        segurando = false  
    end  
end)  
UserInputService.InputChanged:Connect(function(input)  
    if segurando and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then  
        local pos = math.clamp((input.Position.X - barra.AbsolutePosition.X) / barra.AbsoluteSize.X, 0, 1)  
        fill.Size = UDim2.new(pos,0,1,0)  
        local value = math.floor(min + (max-min) * pos)  
        label.Text = nome.." ("..value..")"  
        callback(value)  
    end  
end)  
return fill

end

-- SLIDERS
criarSlider("Velocidade Tween", 20, 50, 500, SPEED_TWEEN, function(v) SPEED_TWEEN = v end)
criarSlider("Velocidade Kill", 70, 50, 500, SPEED_KILL, function(v) SPEED_KILL = v end)
criarSlider("Velocidade √ìrbita", 120, 5, 500, ORBIT_SPEED_TWEEN, function(v) ORBIT_SPEED_TWEEN=v; ORBIT_SPEED_KILL=v end)
criarSlider("Altura Subida", 170, 0, 80, UP_OFFSET_TWEEN, function(v) UP_OFFSET_TWEEN=v; UP_OFFSET_KILL=v end)

-- TWEEN BOT√ÉO

TweenBtn.MouseButton1Click:Connect(function()
    if not SelectedPlayer then return end

    TweenActive = not TweenActive
    if TweenActive then
        TweenBtn.BackgroundColor3 = Color3.fromRGB(0,255,0)  -- fundo verde
        TweenBtn.TextColor3 = Color3.fromRGB(0,0,0)          -- texto preto
        TweenBtn.Text = "Tween ON"
    else
        TweenBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)    -- fundo preto
        TweenBtn.TextColor3 = Color3.fromRGB(0,255,0)        -- texto verde
        TweenBtn.Text = "Tween OFF"
    end
end)

if TweenActive then  
	local hrp = GetPart(LocalPlayer.Character)  
	if hrp then  
		AlturaSubida = hrp.Position.Y + UP_OFFSET_TWEEN  
	end  
	Subiu = false  
	Noclip(true)  
else  
	Subiu = false  
	Noclip(false)  
end

RunService.Heartbeat:Connect(function(dt)
if not TweenActive then return end
if not SelectedPlayer or not SelectedPlayer.Character or not SelectedPlayer.Character:FindFirstChildOfClass("Humanoid") then
Subiu = false
return
end

local hrp = GetPart(LocalPlayer.Character)  
local targetHRP = GetPart(SelectedPlayer.Character)  
if not hrp or not targetHRP then return end  

-- SUBIDA INICIAL  
if not Subiu and AlturaSubida then  
	local destino = Vector3.new(hrp.Position.X, AlturaSubida, hrp.Position.Z)  
	local move = destino - hrp.Position  
	if move.Magnitude < 1 then  
		Subiu = true  
	else  
		hrp.CFrame = hrp.CFrame + move.Unit * math.min(move.Magnitude, SPEED_TWEEN * dt)  
	end  
	return  
end  

-- MODOS DE ORBITA DO TWEEN  
if ORBIT_MODE_TWEEN == 1 then  
	-- Orbita circular  
	local angle = tick() * ORBIT_SPEED_TWEEN  
	local offset = Vector3.new(math.cos(angle)*ORBIT_RADIUS, ORBIT_HEIGHT, math.sin(angle)*ORBIT_RADIUS)  
	local destination = targetHRP.Position + offset  
	local move = destination - hrp.Position  
	if move.Magnitude > 0.1 then  
		hrp.CFrame = CFrame.new(hrp.Position + move.Unit * math.min(move.Magnitude, SPEED_TWEEN * dt), targetHRP.Position)  
	end  
elseif ORBIT_MODE_TWEEN == 2 then  
	-- Wazure (atr√°s do jogador, 2 studs)  
	local backOffset = -targetHRP.CFrame.LookVector * 2 + Vector3.new(0,5,0)  
	local destination = targetHRP.Position + backOffset  
	local move = destination - hrp.Position  
	if move.Magnitude > 0.1 then  
		hrp.CFrame = CFrame.new(hrp.Position + move.Unit * math.min(move.Magnitude, SPEED_TWEEN * dt), targetHRP.Position)  
	end  
elseif ORBIT_MODE_TWEEN == 3 then  
	-- Estrela acima da cabe√ßa  
	local t = tick()  
	local points = 5  
	local angle = (t * 5) % (2 * math.pi)  
	local offset = Vector3.new(math.cos(angle*points)*ORBIT_RADIUS, 20, math.sin(angle*points)*ORBIT_RADIUS)  
	local destination = targetHRP.Position + offset  
	local move = destination - hrp.Position  
	if move.Magnitude > 0.1 then  
		hrp.CFrame = CFrame.new(hrp.Position + move.Unit * math.min(move.Magnitude, SPEED_TWEEN * dt), targetHRP.Position)  
	end  
end  

hrp.Velocity = Vector3.zero

end)

-- SISTEMA KILL LIMPO COM AUTO SKILL, AUTO EQUIP E N√çVEL M√çNIMO
local KillActive = false
local Subiu = false
local AlturaSubida = nil
local AutoSkill = true
local SkillX, SkillZ, SkillC = true, true, true

local MIN_LEVEL = 2100
local ATTACK_DISTANCE = 40

local function GetPlayerLevel(player)
	if player:FindFirstChild("Data") and player.Data:FindFirstChild("Level") then
		return player.Data.Level.Value
	end
	return 0
end

local function GetClosestKillPlayer()
	local myPos = LocalPlayer.Character and GetPart(LocalPlayer.Character).Position
	if not myPos then return nil end

	local closest, dist = nil, math.huge
	for _,plr in pairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local hum = plr.Character:FindFirstChildOfClass("Humanoid")
			local level = GetPlayerLevel(plr)
			if hum and hum.Health > 0 and level >= MIN_LEVEL then
				local d = (plr.Character.HumanoidRootPart.Position - myPos).Magnitude
				if d < dist then
					dist = d
					closest = plr
				end
			end
		end
	end
	return closest
end

-- Bot√£o Kill
KillBtn.MouseButton1Click:Connect(function()
    KillActive = not KillActive

    if KillActive then
        KillBtn.BackgroundColor3 = Color3.fromRGB(0,255,0) -- fundo verde
        KillBtn.TextColor3 = Color3.fromRGB(0,0,0)         -- texto preto
        KillBtn.Text = "Kill ON"

        -- L√≥gica que estava fora
        SelectedPlayer = GetClosestKillPlayer()
        local hrp = GetPart(LocalPlayer.Character)
        if hrp then
            AlturaSubida = hrp.Position.Y + UP_OFFSET_KILL
        end
        Subiu = false
        Noclip(true)
    else
        KillBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)   -- fundo preto
        KillBtn.TextColor3 = Color3.fromRGB(0,255,0)       -- texto verde
        KillBtn.Text = "Kill OFF"

        Subiu = false
        Noclip(false)
    end
end)

-- Loop do Kill (movimento)
RunService.Heartbeat:Connect(function(dt)
	if not KillActive then return end

	-- atualiza alvo se necess√°rio
	if not SelectedPlayer or not SelectedPlayer.Character or not SelectedPlayer.Character:FindFirstChildOfClass("Humanoid") 
		or GetPlayerLevel(SelectedPlayer) < MIN_LEVEL 
		or SelectedPlayer.Character.Humanoid.Health <= 0 then
		SelectedPlayer = GetClosestKillPlayer()
		Subiu = false
		local hrp = GetPart(LocalPlayer.Character)
		if hrp then AlturaSubida = hrp.Position.Y + UP_OFFSET_KILL end
		return
	end

	local hrp = GetPart(LocalPlayer.Character)
	local targetHRP = GetPart(SelectedPlayer.Character)
	if not hrp or not targetHRP then return end

	-- SUBIDA INICIAL
	if not Subiu and AlturaSubida then
		local destino = Vector3.new(hrp.Position.X, AlturaSubida, hrp.Position.Z)
		local move = destino - hrp.Position
		if move.Magnitude < 1 then
			Subiu = true
		else
			hrp.CFrame = hrp.CFrame + move.Unit * math.min(move.Magnitude, SPEED_KILL * dt)
		end
		return
	end

	-- ORBITA
	local angle = tick() * ORBIT_SPEED_KILL
	local offset = Vector3.new(math.cos(angle)*ORBIT_RADIUS, ORBIT_HEIGHT, math.sin(angle)*ORBIT_RADIUS)
	local destination = targetHRP.Position + offset
	local move = destination - hrp.Position
	if move.Magnitude > 0.1 then
		hrp.CFrame = CFrame.new(hrp.Position + move.Unit * math.min(move.Magnitude, SPEED_KILL * dt), targetHRP.Position)
	end

	hrp.Velocity = Vector3.zero
end)

-- AUTO EQUIP GODHUMAN
task.spawn(function()
	while task.wait(3) do
		if KillActive then
			pcall(function()
				local char = LocalPlayer.Character
				if char then
					local hum = char:FindFirstChildOfClass("Humanoid")
					local tool = LocalPlayer.Backpack:FindFirstChild("Godhuman") or char:FindFirstChild("Godhuman")
					if tool and hum then
						hum:EquipTool(tool)
					end
				end
			end)
		end
	end
end)

-- AUTO SKILL X Z C
task.spawn(function()
	while task.wait() do
		if AutoSkill and KillActive and SelectedPlayer and SelectedPlayer.Character then
			local hrp = GetPart(LocalPlayer.Character)
			local targetHRP = GetPart(SelectedPlayer.Character)
			if hrp and targetHRP then
				local distance = (hrp.Position - targetHRP.Position).Magnitude
				if distance <= ATTACK_DISTANCE then
					if SkillX then
						VirtualInputManager:SendKeyEvent(true,"X",false,game)
						task.wait(0.1)
						VirtualInputManager:SendKeyEvent(false,"X",false,game)
					end
					if SkillZ then
						VirtualInputManager:SendKeyEvent(true,"Z",false,game)
						task.wait(0.1)
						VirtualInputManager:SendKeyEvent(false,"Z",false,game)
					end
					if SkillC then
						VirtualInputManager:SendKeyEvent(true,"C",false,game)
						task.wait(0.1)
						VirtualInputManager:SendKeyEvent(false,"C",false,game)
					end
				end
			end
		end
	end
end)

-- SILENT AIM BOT√ÉO

SilentBtn.MouseButton1Click:Connect(function()
    SilentActive = not SilentActive
    if SilentActive then
        SilentBtn.BackgroundColor3 = Color3.fromRGB(0,255,0) -- fundo verde
        SilentBtn.TextColor3 = Color3.fromRGB(0,0,0)         -- texto preto
        SilentBtn.Text = "Silent ON"
    else
        SilentBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)   -- fundo preto
        SilentBtn.TextColor3 = Color3.fromRGB(0,255,0)       -- texto verde
        SilentBtn.Text = "Silent OFF"
    end
end)

-- SILENT AIM GUI + CADEADO

local SilentGui, Profile, ImageProfile, NamePlayers, HealthPlayers, Healthbar, Healthgreen, LockBtn

local function GetClosestForSilent()
	local myPos = LocalPlayer.Character and GetPart(LocalPlayer.Character).Position
	if not myPos then return nil end
	local closest, best = nil, math.huge

	for _,p in pairs(Players:GetPlayers()) do
		if p ~= LocalPlayer and p.Character and GetPart(p.Character) then
			local hum = p.Character:FindFirstChildOfClass("Humanoid")
			if hum and hum.Health > 0 then
				local dist = (GetPart(p.Character).Position - myPos).Magnitude
				if dist < best then
					best = dist
					closest = p
				end
			end
		end
	end
	return closest
end

local function CreateSilentGui()
	if SilentGui then SilentGui:Destroy() end

	SilentGui = Instance.new("Frame", Gui)
	SilentGui.Size = UDim2.new(0,220,0,95)
	SilentGui.Position = UDim2.new(0.03,0,0.4,0)
	SilentGui.BackgroundColor3 = Color3.fromRGB(40,40,40)
	SilentGui.Active = true
	SilentGui.Draggable = true
	Instance.new("UICorner", SilentGui)

	Profile = Instance.new("Frame", SilentGui)
	Profile.Size = UDim2.new(0,50,0,50)
	Profile.Position = UDim2.new(0.02,0,0.1,0)
	Profile.BackgroundColor3 = Color3.fromRGB(255,255,255)
	Instance.new("UICorner", Profile)

	ImageProfile = Instance.new("ImageLabel", Profile)
	ImageProfile.Size = UDim2.new(0,48,0,48)
	ImageProfile.Position = UDim2.new(0,1,0,1)
	Instance.new("UICorner", ImageProfile)

	NamePlayers = Instance.new("TextLabel", Profile)
	NamePlayers.Position = UDim2.new(1.3,0,0.05,0)
	NamePlayers.Size = UDim2.new(0,140,0,20)
	NamePlayers.BackgroundTransparency = 1
	NamePlayers.TextColor3 = Color3.new(1,1,1)
	NamePlayers.Font = Enum.Font.GothamBold
	NamePlayers.TextSize = 16

	HealthPlayers = Instance.new("TextLabel", Profile)
	HealthPlayers.Position = UDim2.new(1.3,0,0.45,0)
	HealthPlayers.Size = UDim2.new(0,140,0,18)
	HealthPlayers.BackgroundTransparency = 1
	HealthPlayers.TextColor3 = Color3.new(1,1,1)

	Healthbar = Instance.new("Frame", Profile)
	Healthbar.Position = UDim2.new(1.3,0,0.8,0)
	Healthbar.Size = UDim2.new(0,130,0,7)
	Healthbar.BackgroundColor3 = Color3.fromRGB(40,40,40)
	Instance.new("UICorner", Healthbar)

	Healthgreen = Instance.new("Frame", Healthbar)
	Healthgreen.Size = UDim2.new(1,0,1,0)
	Healthgreen.BackgroundColor3 = Color3.fromRGB(0,220,100)
	Instance.new("UICorner", Healthgreen)

	LockBtn = Instance.new("TextButton", SilentGui)
	LockBtn.Size = UDim2.new(0,35,0,35)
	LockBtn.Position = UDim2.new(0.75,0,0.85,0)
	LockBtn.Text = "üîì"
	LockBtn.Font = Enum.Font.GothamBold
	LockBtn.TextSize = 20

	LockBtn.MouseButton1Click:Connect(function()
		LOCKED = not LOCKED
		LockBtn.Text = LOCKED and "üîí" or "üîì"
	end)
end

RunService.RenderStepped:Connect(function()
	if not SilentActive then
		if SilentGui then SilentGui:Destroy(); SilentGui=nil end
		aimbot_target = nil
		return
	end

	if not SilentGui then CreateSilentGui() end

	local target = LOCKED and last_target or GetClosestForSilent()
	last_target = target

	if target and target.Character then
		aimbot_target = GetPart(target.Character).Position + Vector3.new(0,3,0)
		NamePlayers.Text = "Name | "..target.DisplayName
		HealthPlayers.Text = "Health | "..math.floor(target.Character.Humanoid.Health)
		Healthgreen.Size = UDim2.new(target.Character.Humanoid.Health/target.Character.Humanoid.MaxHealth,0,1,0)
		ImageProfile.Image = Players:GetUserThumbnailAsync(target.UserId,Enum.ThumbnailType.HeadShot,Enum.ThumbnailSize.Size150x150)
	end
end)

-- HOOK SILENT AIM

local old
old = hookmetamethod(game, "__namecall", function(self,...)
	local args = {...}
	if aimbot_target and (getnamecallmethod()=="FireServer" or getnamecallmethod()=="InvokeServer") then
		if typeof(args[1])=="Vector3" then args[1] = aimbot_target end
		if typeof(args[2])=="Vector3" then args[2] = aimbot_target end
	end
	return old(self, unpack(args))
end) 

-- FAST ATTACK + FRUTAS | Divine

local FastAttackActive = false
local FRUIT_ACTIVE = false
local MELEE_SPEED = 0
local RANGE = 9999
local DELAY = 0
local MAX_TARGETS = 3

-- SERVICES

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- REMOTES

local Modules = ReplicatedStorage:WaitForChild("Modules")
local Net = Modules:WaitForChild("Net")
local RegisterAttack = Net:WaitForChild("RE/RegisterAttack")
local RegisterHit = Net:WaitForChild("RE/RegisterHit")

-- FRUITS

local Fruits = {
	"Kitsune-Kitsune","Pain-Pain","Blade-Blade",
	"Mammoth-Mammoth","Gas-Gas","Tiger-Tiger",
	"Yeti-Yeti","Dragon-Dragon","Control-Control","T-rex-T-rex"
}

-- UTILS

local function GetPart(m)
	return m and (
		m:FindFirstChild("HumanoidRootPart")
		or m:FindFirstChild("Torso")
		or m:FindFirstChild("UpperTorso")
	)
end

local function GetHRP()
	local char = LocalPlayer.Character
	return char and char:FindFirstChild("HumanoidRootPart")
end

local function InRange(part)
	local hrp = GetHRP()
	if not hrp or not part then return false end
	return (hrp.Position - part.Position).Magnitude <= RANGE
end

-- GET TARGETS LIMITADOS

local function GetLimitedTargets()
	local targets = {}
	local hrp = GetHRP()
	if not hrp then return targets end

	-- PLAYERS
	for _,plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character then
			local part = GetPart(plr.Character)
			local hum = plr.Character:FindFirstChildOfClass("Humanoid")
			if part and hum and hum.Health > 0 and InRange(part) then
				table.insert(targets, part)
			end
		end
	end

	-- NPCs
	if workspace:FindFirstChild("Enemies") then
		for _,npc in ipairs(workspace.Enemies:GetChildren()) do
			local part = GetPart(npc)
			local hum = npc:FindFirstChildOfClass("Humanoid")
			if part and hum and hum.Health > 0 and InRange(part) then
				table.insert(targets, part)
			end
		end
	end

	-- ORDENA PELOS MAIS PR√ìXIMOS
	table.sort(targets, function(a,b)
		return (a.Position - hrp.Position).Magnitude < (b.Position - hrp.Position).Magnitude
	end)

	-- LIMITA A MAX_TARGETS
	while #targets > MAX_TARGETS do
		table.remove(targets)
	end

	return targets
end

-- FAST ATTACK LOOP

task.spawn(function()
	while true do
		task.wait(DELAY)
		if not FastAttackActive then continue end

		local targets = GetLimitedTargets()
		if #targets == 0 then continue end

		-- ‚öîÔ∏è Melee attack 1x
		pcall(function()
			RegisterAttack:FireServer(MELEE_SPEED)
		end)

		-- ‚öîÔ∏è Ataca os 3 alvos de uma vez
		for _,part in ipairs(targets) do
			pcall(function()
				RegisterHit:FireServer(part, {}, nil, "24057351")
			end)
		end

		-- üçé FRUIT (opcional)
		if FRUIT_ACTIVE then
			pcall(function()
				local camPos = workspace.CurrentCamera.CFrame.Position
				for _,part in ipairs(targets) do
					local dir = (part.Position - camPos).Unit

					for _,name in ipairs(Fruits) do
						local tool = LocalPlayer.Backpack:FindFirstChild(name)
							or LocalPlayer.Character:FindFirstChild(name)

						if tool then
							local remote = tool:FindFirstChild("LeftClickRemote")
								or tool:FindFirstChildOfClass("RemoteEvent")

							if remote then
								remote:FireServer(dir, 0, true)
							end
						end
					end
				end
			end)
		end
	end
end)


-- BOT√ÉO FAST ATTACK EXISTENTE

FastBtn.MouseButton1Click:Connect(function()
    FastAttackActive = not FastAttackActive
    FRUIT_ACTIVE = FastAttackActive -- FRUIT segue o FastAttack

    if FastAttackActive then
        FastBtn.BackgroundColor3 = Color3.fromRGB(0,255,0) -- fundo verde
        FastBtn.TextColor3 = Color3.fromRGB(0,0,0)         -- texto preto
        FastBtn.Text = "Fast ON"
    else
        FastBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)   -- fundo preto
        FastBtn.TextColor3 = Color3.fromRGB(0,255,0)       -- texto verde
        FastBtn.Text = "Fast OFF"
    end
end)

-- WALK ON WATER (SEMPRE ATIVO)

task.spawn(function()
	while task.wait(0.5) do
		pcall(function()
			if workspace:FindFirstChild("Map") and workspace.Map:FindFirstChild("WaterBase-Plane") then
				local water = workspace.Map["WaterBase-Plane"]
				water.Size = Vector3.new(1000, 112, 1000) -- TAMANHO ALTO PRA ANDAR
				water.CanCollide = true
			end
		end)
	end
end)

-- misc

_G.MiscHub = _G.MiscHub or {}
local M = _G.MiscHub

M.Players = M.Players or game:GetService("Players")
M.RunService = M.RunService or game:GetService("RunService")
M.UserInputService = M.UserInputService or game:GetService("UserInputService")

M.player = M.Players.LocalPlayer

M.SpeedValor = M.SpeedValor or 30
M.JumpValor = M.JumpValor or 50
M.FlyVelocidade = M.FlyVelocidade or 50
M.SpeedAtivo = M.SpeedAtivo or false
M.JumpAtivo = M.JumpAtivo or false
M.FlyAtivo = M.FlyAtivo or false
M.NoclipAtivo = M.NoclipAtivo or false
M.AutoV4Ativo = M.AutoV4Ativo or false
M.AntiStunAtivo = M.AntiStunAtivo or false
M.MenuMinimizado = M.MenuMinimizado or true

M.flyConnection = M.flyConnection or nil
M.autoV4Connection = M.autoV4Connection or nil
M.noclipConnection = M.noclipConnection or nil
M.savedCanCollide = M.savedCanCollide or {}

local function getCharacter()
    return M.player.Character or M.player.CharacterAdded:Wait()
end

local function getHumanoid()
    return getCharacter():FindFirstChildWhichIsA("Humanoid")
end

local function getRoot()
    local char = getCharacter()
    return char:FindFirstChild("HumanoidRootPart") or char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
end

if M.player.PlayerGui:FindFirstChild("MiscHub") then
    M.player.PlayerGui.MiscHub:Destroy()
end

M.gui = Instance.new("ScreenGui")
M.gui.Name = "MiscHub"
M.gui.ResetOnSpawn = false
M.gui.Parent = M.player:WaitForChild("PlayerGui")

M.menu = Instance.new("Frame", M.gui)
M.menu.Size = UDim2.new(0,100,0,30)
M.menu.Position = UDim2.new(0,150,0,10)
M.menu.BackgroundColor3 = Color3.fromRGB(30,30,30)
M.menu.Active = true
M.menu.ClipsDescendants = true
M.menu.Visible = false

M.title = Instance.new("TextButton", M.menu)
M.title.Size = UDim2.new(1,0,0,30)
M.title.BackgroundColor3 = Color3.fromRGB(20,20,20)
M.title.Text = "MISC [+]"
M.title.TextColor3 = Color3.new(1,1,1)
M.title.Font = Enum.Font.SourceSansBold
M.title.TextSize = 16
M.title.AutoButtonColor = false

M.title.MouseButton1Click:Connect(function()
    M.MenuMinimizado = not M.MenuMinimizado
    if M.MenuMinimizado then
        M.menu.Size = UDim2.new(0,100,0,30)
        M.title.Text = "MISC [+]"
    else
        M.menu.Size = UDim2.new(0,280,0,320)
        M.title.Text = "MISC - BLOX FRUITS [-]"
    end
end)

M.dragging = false
M.dragStart = nil
M.startPos = nil

M.title.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        M.dragging = true
        M.dragStart = input.Position
        M.startPos = M.menu.Position
    end
end)

M.title.InputEnded:Connect(function(input)
    M.dragging = false
end)

M.UserInputService.InputChanged:Connect(function(input)
    if M.dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - M.dragStart
        M.menu.Position = UDim2.new(
            M.startPos.X.Scale, M.startPos.X.Offset + delta.X,
            M.startPos.Y.Scale, M.startPos.Y.Offset + delta.Y
        )
    end
end)

MiscBtn.MouseButton1Click:Connect(function()
    M.menu.Visible = not M.menu.Visible
    M.menuMinimizado = true
    M.menu.Size = UDim2.new(0,100,0,30)
    M.title.Text = "MISC [+]"
    MiscBtn.BackgroundColor3 = M.menu.Visible and Color3.fromRGB(0,255,0) or Color3.fromRGB(0,0,0)
    MiscBtn.TextColor3 = M.menu.Visible and Color3.fromRGB(0,0,0) or Color3.fromRGB(0,255,0)
end)

local function criarBotaoToggle(textoBase, pos, estadoInicial, callback)
    local estado = estadoInicial
    local botao = Instance.new("TextButton", M.menu)
    botao.Size = UDim2.new(0,120,0,30)
    botao.Position = pos
    botao.BackgroundColor3 = Color3.fromRGB(60,60,60)
    botao.TextColor3 = Color3.new(1,1,1)
    botao.Font = Enum.Font.SourceSansBold
    botao.TextSize = 14
    local function atualizarTexto()
        botao.Text = textoBase.." ["..(estado and "ON" or "OFF").."]"
    end
    atualizarTexto()
    botao.MouseButton1Click:Connect(function()
        estado = not estado
        atualizarTexto()
        callback(estado)
    end)
    return botao
end

local function criarSlider(nome, posY, min, max, valorInicial, callback)
    local label = Instance.new("TextLabel", M.menu)
    label.Size = UDim2.new(1,-20,0,20)
    label.Position = UDim2.new(0,10,0,posY)
    label.Text = nome.." ("..valorInicial..")"
    label.TextColor3 = Color3.new(1,1,1)
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 13

    local barra = Instance.new("Frame", M.menu)
    barra.Size = UDim2.new(1,-20,0,14)
    barra.Position = UDim2.new(0,10,0,posY+22)
    barra.BackgroundColor3 = Color3.fromRGB(70,70,70)

    local fill = Instance.new("Frame", barra)
    fill.Size = UDim2.new((valorInicial-min)/(max-min),0,1,0)
    fill.BackgroundColor3 = Color3.fromRGB(0,170,255)

    local segurando = false
    barra.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            segurando = true
        end
    end)
    M.UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            segurando = false
        end
    end)
    M.UserInputService.InputChanged:Connect(function(input)
        if segurando and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local pos = math.clamp((input.Position.X - barra.AbsolutePosition.X) / barra.AbsoluteSize.X, 0, 1)
            fill.Size = UDim2.new(pos,0,1,0)
            local value = math.floor(min + (max-min) * pos)
            label.Text = nome.." ("..value..")"
            callback(value)
        end
    end)
    return fill
end

local fillVelocidade = criarSlider("Velocidade", 40, 30, 400, M.SpeedValor, function(v) M.SpeedValor = v end)
local fillPulo = criarSlider("Pulo", 80, 50, 400, M.JumpValor, function(v) M.JumpValor = v end)
local fillFly = criarSlider("Fly Speed", 120, 50, 1000, M.FlyVelocidade, function(v) M.FlyVelocidade = v end)

local function startFly()
    local chr, hum, root = getCharacter(), getHumanoid(), getRoot()
    if not root then return end
    hum.PlatformStand = true
    local BV = root:FindFirstChild("FlyBV") or Instance.new("BodyVelocity", root)
    BV.Name = "FlyBV"; BV.MaxForce = Vector3.new(1e9,1e9,1e9); BV.Velocity = Vector3.new(0,0,0)
    local BG = root:FindFirstChild("FlyBG") or Instance.new("BodyGyro", root)
    BG.Name = "FlyBG"; BG.MaxTorque = Vector3.new(1e9,1e9,1e9); BG.P = 9e4; BG.CFrame = root.CFrame
    M.flyConnection = M.RunService.RenderStepped:Connect(function()
        local moveDir = hum.MoveDirection
        local cam = workspace.CurrentCamera
        local localDir = cam.CFrame:VectorToObjectSpace(moveDir)
        local velocity = cam.CFrame.RightVector * localDir.X * M.FlyVelocidade + cam.CFrame.LookVector * (-localDir.Z) * M.FlyVelocidade
        BV.Velocity = velocity
        if velocity.Magnitude > 0 then
            BG.CFrame = CFrame.new(root.Position, root.Position + velocity)
        else
            BG.CFrame = CFrame.new(root.Position, root.Position + cam.CFrame.LookVector)
        end
    end)
end

local function stopFly()
    M.FlyAtivo = false
    if M.flyConnection then M.flyConnection:Disconnect() end
    local hum, root = getHumanoid(), getRoot()
    if hum then hum.PlatformStand = false end
    if root then
        for _, n in ipairs({"FlyBV","FlyBG"}) do
            local obj = root:FindFirstChild(n)
            if obj then obj:Destroy() end
        end
    end
end

local function AtivarNoclip()
    if M.noclipConnection then return end
    M.noclipConnection = M.RunService.Stepped:Connect(function()
        local char = getCharacter()
        for _,v in ipairs(char:GetDescendants()) do
            if v:IsA("BasePart") then
                if M.savedCanCollide[v] == nil then M.savedCanCollide[v] = v.CanCollide end
                v.CanCollide = false
            end
        end
    end)
end

local function DesativarNoclip()
    if M.noclipConnection then M.noclipConnection:Disconnect(); M.noclipConnection = nil end
    for part,orig in pairs(M.savedCanCollide) do
        if part and part.Parent then pcall(function() part.CanCollide = orig end) end
    end
    M.savedCanCollide = {}
end

local function ToggleAutoV4(v)
    if v then
        local lastTime = 0
        M.autoV4Connection = M.RunService.Heartbeat:Connect(function(step)
            lastTime = lastTime + step
            if lastTime >= 1 then
                lastTime = 0
                pcall(function()
                    local Event = M.player.Backpack:FindFirstChild("Awakening") and M.player.Backpack.Awakening:FindFirstChild("RemoteFunction")
                    if Event then Event:InvokeServer(true) end
                end)
            end
        end)
    else
        if M.autoV4Connection then M.autoV4Connection:Disconnect(); M.autoV4Connection=nil end
    end
end

M.AntiAtivo = M.AntiAtivo or false
M.heartbeatConn = M.heartbeatConn or nil
M.descendantConn = M.descendantConn or nil

M.moverClassesRagdoll = M.moverClassesRagdoll or {
"BodyVelocity","BodyPosition","BodyGyro","BodyAngularVelocity",
"BodyForce","LinearVelocity","AlignPosition","AlignOrientation","VectorForce"
}

local function isMoverRagdoll(obj)
    for _, c in ipairs(M.moverClassesRagdoll) do
        if obj:IsA(c) then return true end
    end
    return false
end

local function limparForcasRagdoll(char)
    for _, obj in ipairs(char:GetDescendants()) do
        if isMoverRagdoll(obj) and obj.Name ~= "FlyBV" and obj.Name ~= "FlyBG" and obj.Name ~= "FlyGyro" then
            pcall(function() obj:Destroy() end)
        end
    end
end

local function forcarHumanoidRagdoll(char)
    local hum = char:FindFirstChildWhichIsA("Humanoid")
    if not hum then return end
    pcall(function()
        hum.PlatformStand = false
        hum:ChangeState(Enum.HumanoidStateType.Running)
    end)
end

local function loopRagdoll()
    if not M.AntiAtivo then return end
    local char = getCharacter()
    limparForcasRagdoll(char)
    forcarHumanoidRagdoll(char)
end

local function onDescAddedRagdoll(obj)
    if not M.AntiAtivo then return end
    if isMoverRagdoll(obj) then pcall(function() obj:Destroy() end) end
end

local function ativarRagdoll()
    if M.AntiAtivo then return end
    M.AntiAtivo = true
    local char = getCharacter()
    limparForcasRagdoll(char)
    forcarHumanoidRagdoll(char)
    M.descendantConn = char.DescendantAdded:Connect(onDescAddedRagdoll)
    M.heartbeatConn = M.RunService.Heartbeat:Connect(loopRagdoll)
end

local function desativarRagdoll()
    if not M.AntiAtivo then return end
    M.AntiAtivo = false
    if M.heartbeatConn then M.heartbeatConn:Disconnect(); M.heartbeatConn=nil end
    if M.descendantConn then M.descendantConn:Disconnect(); M.descendantConn=nil end
    pcall(function() M.player.Character:BreakJoints() end)
end

local btnSpeed = criarBotaoToggle("Speed", UDim2.new(0,10,0,160), false, function(v) M.SpeedAtivo = v end)
local btnJump = criarBotaoToggle("Jump", UDim2.new(0,150,0,160), false, function(v)
    M.JumpAtivo = v
    if not v then getHumanoid().JumpPower = 50 end
end)
local btnFly = criarBotaoToggle("Fly", UDim2.new(0,10,0,200), false, function(v)
    M.FlyAtivo = v
    if v then startFly() else stopFly() end
end)
local btnNoclip = criarBotaoToggle("Noclip", UDim2.new(0,150,0,200), false, function(v)
    M.NoclipAtivo = v
    if v then AtivarNoclip() else DesativarNoclip() end
end)
local btnAutoV4 = criarBotaoToggle("Auto V4", UDim2.new(0,10,0,240), false, ToggleAutoV4)
local btnAntiStun = criarBotaoToggle("Anti-Stun", UDim2.new(0,150,0,240), false, function(v)
    if v then ativarRagdoll() else desativarRagdoll() end
end)

M.RunService.RenderStepped:Connect(function()
    local hum = getHumanoid()
    if not hum then return end
    if M.SpeedAtivo then hum.WalkSpeed = M.SpeedValor end
    if M.JumpAtivo then hum.JumpPower = M.JumpValor end
end)

M.player.CharacterAdded:Connect(function()
    desativarRagdoll()
    DesativarNoclip()
    stopFly()
end)


-- SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local StarterGui = game:GetService("StarterGui")

local lp = Players.LocalPlayer

-- CFRAMES
local CF_SAFE  = CFrame.new(-6508.55811, 83.3668747, -132.839996)
local CF_BASE  = CFrame.new(-316.895142, 332.040527, 584.296082)
local CF_FINAL = CFrame.new(-397.918396, 149.399918, 291.235199)

-- STATE
local auto = false
local escaped = false
local upConn = nil
local mainConn = nil

local char, hum, hrp

-- NOTIFY
local function notify(txt)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = "AUTO FUGIR üçå",
			Text = txt,
			Duration = 2
		})
	end)
end

-- UTILS
local function forceTP(cf)
	if hrp then
		hrp.CFrame = cf
	end
end

local function stopTPUp()
	if upConn then
		upConn:Disconnect()
		upConn = nil
	end
end

local function startTPUp()
	if upConn or not hrp then return end
	upConn = RunService.Heartbeat:Connect(function()
		if hrp then
			hrp.CFrame = hrp.CFrame + Vector3.new(0, 99999, 0)
		end
	end)
end

local function tweenToFinal()
	if not hrp then return end
	local dist = (hrp.Position - CF_FINAL.Position).Magnitude
	local t = dist / 350
	TweenService:Create(
		hrp,
		TweenInfo.new(t, Enum.EasingStyle.Linear),
		{CFrame = CF_FINAL}
	):Play()
end

-- AUTO LOGIC
local function escapeNow()
	if escaped then return end
	escaped = true
	forceTP(CF_SAFE)
	startTPUp()
	notify("FUGINDO ‚ò†Ô∏è")
end

local function setAuto(state)
	auto = state
	escaped = false
	stopTPUp()

if AuraBtn then
    if state then
        AuraBtn.BackgroundColor3 = Color3.fromRGB(0,255,0) -- fundo verde
        AuraBtn.TextColor3 = Color3.fromRGB(0,0,0)         -- texto preto
        AuraBtn.Text = "Aura üçå ON"
    else
        AuraBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)   -- fundo preto
        AuraBtn.TextColor3 = Color3.fromRGB(0,255,0)       -- texto verde
        AuraBtn.Text = "Aura üçå OFF"
    end
end

	if not state then
		task.spawn(function()
			forceTP(CF_BASE)
			task.wait(0.15)
			tweenToFinal()
		end)
		notify("DESATIVADO")
	else
		notify("TP ONLY ATIVO üçå")
	end
end

-- MAIN LOOP (S√ì 1, SEM WAIT)
mainConn = RunService.Heartbeat:Connect(function()
	if not auto or not hum then return end

	local hp = hum.Health / hum.MaxHealth

	if hp <= 0.4 then
		escapeNow()
	elseif escaped and hp >= 0.6 then
		escaped = false
		stopTPUp()
		task.spawn(function()
			forceTP(CF_BASE)
			task.wait(0.15)
			tweenToFinal()
		end)
		notify("SEGURO ‚úÖ")
	end
end)

-- BUTTON
if AuraBtn then
	AuraBtn.MouseButton1Click:Connect(function()
		setAuto(not auto)
	end)
end

-- RESPAWN (LIMPO, SEM ATIVAR NADA)
local function onCharacter(charNew)
	char = charNew
	hum = char:WaitForChild("Humanoid")
	hrp = char:WaitForChild("HumanoidRootPart")

	stopTPUp()
	escaped = false
	auto = false

	if AuraBtn then
		AuraBtn.Text = "Aura üçå OFF"
		AuraBtn.BackgroundColor3 = Color3.fromRGB(0,0,0)
	end
end

lp.CharacterAdded:Connect(onCharacter)

if lp.Character then
	onCharacter(lp.Character)
end
